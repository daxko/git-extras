#!/usr/bin/env ruby

require_relative 'jira.rb'
require_relative 'git.rb'

source_branch = ARGV[0]
if source_branch.nil?
	abort("You must supply the source branch")
end

tickets = Git.get_tickets_from_current_branch(source_branch)

puts "\nShould I move these jira ticket(s) to ready for code review? #{tickets.join(', ')}\n\n"
print "[y/n]?: "
$stdout.flush

input = $stdin.gets.chomp
if input.downcase == "y"
	tickets.each do |ticket|
		puts "Moving #{ticket} to in code review..."
		Jira.move_to_in_code_review(ticket)
	end
end